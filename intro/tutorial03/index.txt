=========================
教程。第三部分：明细表
=========================

在本部分教程中，我们将解释如何使用明细表。

让我们在项目树中选择"Task/Groups"（任务/组）项目，并点击页面右下角的 **New** （新建）按钮：

.. image:: /intro/_images/detail_group_jampy.png
	:scale: 50%
	:align: center
	:alt: detail_group_jampy.png

将其命名为"Details"（明细表）：

.. image:: /intro/_images/detail_group_not_visible_jampy.png
	:scale: 50%
	:align: center
	:alt: detail_group_not_visible_jampy.png

在
:doc:`项目编辑器 </admin/items/item_editor_dialog>`
对话框中，我们将新项目命名为"To do list"（待办事项列表），并按照前一教程的方式添加"Created"（创建时间）和"To do"（待办事项）两个字段：

.. image:: /intro/_images/new_detail_jampy.png
	:scale: 50%
	:align: center
	:alt: new_detail_jampy.png

.. note::
    现在最重要的一步是创建将明细表与其主表"链接"起来的字段。
    这是与 Jam.py v5 的一个关键区别，在 v5 中明细表记录是作为遗留功能处理的。

例如，创建字段"ContactID"（联系人ID）：

.. image:: /intro/_images/new_detail_lookup_id_jampy.png
	:scale: 50%
	:align: center
	:alt: new_detail_lookup_id_jampy.png

"ID"字段是到"Contacts"（联系人）表的 :doc:`查找字段 </programming/data/lookup_fields>`。

.. image:: /intro/_images/new_detail_lookup_id_field_jampy.png
	:scale: 50%
	:align: center
	:alt: new_detail_lookup_id_field_jampy.png

保存"To do list"（待办事项列表）后，选择"Contacts"（联系人）日志，然后点击右侧窗格中的 **Details** （明细表）按钮，打开
:doc:`明细表对话框 </admin/items/details_dialog>`。

.. image:: /intro/_images/new_detail_to_do_jampy.png
	:scale: 50%
	:align: center
	:alt: new_detail_to_do_jampy.png

点击右箭头按钮将"To do list"（待办事项列表）添加到"Contacts"（联系人）的明细表中，然后点击 **OK** （确定）按钮保存更改。

.. image:: /intro/_images/details_dialog_jampy.png
	:scale: 50%
	:align: center
	:alt: details_dialog_jampy.png

一个新的"To do list"（待办事项列表）项目将被创建为"Contacts"（联系人）日志的子项。

.. image:: /intro/_images/contacts_to_do_list_jampy.png
	:scale: 50%
	:align: center
	:alt: contacts_to_do_list_jampy.png

再次选择"Contacts"（联系人）日志，点击 **Edit form** （编辑表单）按钮打开
:doc:`编辑表单对话框 </admin/items/edit_form_dialog>`。选择 **Form** （表单）选项卡，
点击 **Edit details** （编辑明细表）输入框右侧的按钮，然后勾选"To do list"（待办事项列表）复选框。

.. image:: /intro/_images/details_to_edit_jampy.png
	:scale: 50%
	:align: center
	:alt: details_to_edit_jampy.png

让我们更新项目页面并双击某个联系人。现在我们可以为该联系人的待办事项列表添加项目。

.. image:: /intro/_images/new_to_do_item_jampy.png
	:scale: 50%
	:align: center
	:alt: new_to_do_item_jampy.png

点击项目树中的 **Groups** （组）节点，双击 **Details** （明细表）行，并将 Visible（可见）属性设置为 true（是）。

.. image:: /intro/_images/detail_group_visible_jampy.png
	:scale: 50%
	:align: center
	:alt: detail_group_visible_jampy.png

当我们刷新项目页面时，我们将在主菜单中看到"To do list"（待办事项列表）项目。
点击它以查看所有联系人的待办事项列表。

.. image:: /intro/_images/todo_all_jampy.png
	:scale: 50%
	:align: center
	:alt: todo_all_jampy.png

再次选择"Contacts"（联系人）日志，点击 **View form** （查看表单）按钮打开
:doc:`查看表单对话框 </admin/items/view_form_dialog>`。
选择 **Form** （表单）选项卡，点击 **View detail** （查看明细表）输入框右侧的按钮，
然后勾选"To do list"（待办事项列表）复选框。

.. image:: /intro/_images/contacts_view_detail_jampy.png
	:scale: 50%
	:align: center
	:alt: contacts_view_detail_jampy.png

在项目页面中，您将看到当联系人更改时，待办事项列表也会相应更改。

.. image:: /intro/_images/todo_completed_jampy.png
	:scale: 50%
	:align: center
	:alt: todo_completed_jampy.png
